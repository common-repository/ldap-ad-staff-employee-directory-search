jQuery(document).ready(function(){jQuery("#dirtestsearchbutton").click(function(e){var a,r,o,l,d,s;e.preventDefault(),l=jQuery("#ajaxcallurl").val(),d=jQuery("#modirsearchfield").val(),s=jQuery("#modirsearchvalue").val(),a=l,r=d,o=s,jQuery.ajax({url:a,data:{action:"dir_search_fetch_records",selectValue:r,searchValue:o},success:function(e){var a,r,o;a=e=JSON.parse(e),r=jQuery("#ldapSearchResultsContainer"),r.empty(),o=`<div class="mo_ldap_search_results_container">
			<h3 class="mo_ldap_search_results_title">Search Results:</h3>
			<div class="mo_ldap_extra_padding">`,"object"==typeof a?a.error?o+=`<div class="mo_ldap_error_message">
								<h4>Error: ${a.message}</h4>
							</div>`:o+=`<div class="mo_ldap_success_message">
								<h4>Number of users found: ${Object.entries(a).length}</h4>
							</div>`:"connection_error"==a?o+=`<div class="mo_ldap_error_message">
							<h4>Connection Failed: Unable to connect to LDAP server. Please check your connection configuration and try again.</h4>
						</div>`:"search_base_error"==a?o+=`<div class="mo_ldap_error_message">
							<h4>Invalid Search Base Configuration : Please Verify and Correct the Search Base Configuration </h4>
						</div>`:o+=`<div class="mo_ldap_warning_message">
							<h4>No Record Found</h4>
						</div>
						<div class="mo_ldap_extra_padding">
							<h4 class="mo_ldap_general_heading">Possible Reasons:</h4>
						</div>
						<div class="mo_ldap_warning_message">
							<h4>1: User is not present in that search base. The user may be present in the directory but in some other tree and you may have entered a tree where this user is not present.</h4>
							<h4>2: LDAP attributes not set correctly</h4>
						</div>`,o+="</div></div>",r.append(o)},error:function(e){console.error("Error occurred:",e)}})}),r(),jQuery("#mo_ldap_dir_search_conn_help").click(function(){jQuery("#mo_ldap_dir_search_conn_troubleshoot").toggle()}),jQuery("#mo_ldap_dir_search_conn_help_user_mapping").click(function(){jQuery("#mo_ldap_dir_search_conn_user_mapping_troubleshoot").toggle()}),jQuery("#mo_ldap_dir_search_enable_tls_row").length>0&&("ldaps"==jQuery("#mo_ldap_directory_search_protocol").val()?document.getElementById("mo_ldap_dir_search_enable_tls_row").style.display="none":document.getElementById("mo_ldap_dir_search_enable_tls_row").style.display=""),jQuery("#help_mo_ldap_ds_warning_title").click(function(){jQuery("#help_mo_ldap_ds_desc").slideToggle(400)}),jQuery("#mo_ldap_ds_buy_now_btn").click(function(e){e.preventDefault(),upgradeform("wp_ldap_search_directory_premium_plan")}),jQuery("#mo_ldap_ds_role_mapping_premium_box").hover(function(e){jQuery(".mo_ldap_ds_premium_role_mapping_banner").removeClass("mo_ldap_d_none"),jQuery(".mo_ldap_ds_advanced_role_mapping_box").addClass("mo_ldap_ds_blur")},function(e){jQuery(".mo_ldap_ds_premium_role_mapping_banner").addClass("mo_ldap_d_none"),jQuery(".mo_ldap_ds_advanced_role_mapping_box").removeClass("mo_ldap_ds_blur")}),jQuery(".mo_ldap_ds_premium_box").hover(function(e){jQuery(".mo_ldap_ds_premium_role_mapping_banner").removeClass("mo_ldap_d_none"),jQuery(".mo_ldap_ds_premium_feature_box").addClass("mo_ldap_ds_blur"),jQuery(".mo_ldap_ds_advanced_role_mapping_box").addClass("mo_ldap_ds_blur")},function(e){jQuery(".mo_ldap_ds_premium_role_mapping_banner").addClass("mo_ldap_d_none"),jQuery(".mo_ldap_ds_premium_feature_box").removeClass("mo_ldap_ds_blur"),jQuery(".mo_ldap_ds_advanced_role_mapping_box").removeClass("mo_ldap_ds_blur")});let e=document.getElementById("mo_ldap_ds_bg_color"),a=document.getElementById("mo_ldap_ds_font_color");function r(){var e=jQuery("#mo_ldap_ds_bg_color").val(),a=jQuery("#mo_ldap_ds_font_color").val();let r=document.querySelectorAll(".mo_dir_search_user_data_para"),o=document.querySelectorAll(".mo_dir_search_user_data");r.forEach(e=>{e.style.color=a}),o.forEach(a=>{a.style.background=e})}e&&e.addEventListener("input",r),a&&a.addEventListener("input",r)});function upgradeform(e){if(1==mo_ldap_ds_settings_data.isRegistered){let a=`https://portal.miniorange.com/initializepayment?requestOrigin=${e}`;window.open(a,"_blank")}else location.href=mo_ldap_ds_settings_data.myAccountTab}